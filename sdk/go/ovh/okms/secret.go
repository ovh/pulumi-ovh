// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package okms

import (
	"context"
	"reflect"

	"errors"
	"github.com/ovh/pulumi-ovh/sdk/v2/go/ovh/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Manages a secret stored in OVHcloud KMS.
//
// > WARNING: `version.data` is marked **Sensitive** but still ends up in the state file. To mitigate that, it is recommended to protect your state with encryption and access controls. Avoid committing it to source control.
type Secret struct {
	pulumi.CustomResourceState

	// Check-and-set guard. Only used on update operations: must equal the current secret version for the update to succeed.
	// Ignored on create.
	Cas pulumi.Float64PtrOutput `pulumi:"cas"`
	// IAM resource metadata embedded in services models
	Iam SecretIamOutput `pulumi:"iam"`
	// Deprecated: No effect; will be removed in a future version.
	IncludeData pulumi.BoolOutput `pulumi:"includeData"`
	// Create a secret metadata
	Metadata SecretMetadataOutput `pulumi:"metadata"`
	// Okms ID
	OkmsId pulumi.StringOutput `pulumi:"okmsId"`
	// Secret path
	Path pulumi.StringOutput `pulumi:"path"`
	// Create an OKMS secret version
	Version SecretVersionOutput `pulumi:"version"`
}

// NewSecret registers a new resource with the given unique name, arguments, and options.
func NewSecret(ctx *pulumi.Context,
	name string, args *SecretArgs, opts ...pulumi.ResourceOption) (*Secret, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.OkmsId == nil {
		return nil, errors.New("invalid value for required argument 'OkmsId'")
	}
	if args.Path == nil {
		return nil, errors.New("invalid value for required argument 'Path'")
	}
	if args.Version == nil {
		return nil, errors.New("invalid value for required argument 'Version'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource Secret
	err := ctx.RegisterResource("ovh:Okms/secret:Secret", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetSecret gets an existing Secret resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetSecret(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *SecretState, opts ...pulumi.ResourceOption) (*Secret, error) {
	var resource Secret
	err := ctx.ReadResource("ovh:Okms/secret:Secret", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering Secret resources.
type secretState struct {
	// Check-and-set guard. Only used on update operations: must equal the current secret version for the update to succeed.
	// Ignored on create.
	Cas *float64 `pulumi:"cas"`
	// IAM resource metadata embedded in services models
	Iam *SecretIam `pulumi:"iam"`
	// Deprecated: No effect; will be removed in a future version.
	IncludeData *bool `pulumi:"includeData"`
	// Create a secret metadata
	Metadata *SecretMetadata `pulumi:"metadata"`
	// Okms ID
	OkmsId *string `pulumi:"okmsId"`
	// Secret path
	Path *string `pulumi:"path"`
	// Create an OKMS secret version
	Version *SecretVersion `pulumi:"version"`
}

type SecretState struct {
	// Check-and-set guard. Only used on update operations: must equal the current secret version for the update to succeed.
	// Ignored on create.
	Cas pulumi.Float64PtrInput
	// IAM resource metadata embedded in services models
	Iam SecretIamPtrInput
	// Deprecated: No effect; will be removed in a future version.
	IncludeData pulumi.BoolPtrInput
	// Create a secret metadata
	Metadata SecretMetadataPtrInput
	// Okms ID
	OkmsId pulumi.StringPtrInput
	// Secret path
	Path pulumi.StringPtrInput
	// Create an OKMS secret version
	Version SecretVersionPtrInput
}

func (SecretState) ElementType() reflect.Type {
	return reflect.TypeOf((*secretState)(nil)).Elem()
}

type secretArgs struct {
	// Check-and-set guard. Only used on update operations: must equal the current secret version for the update to succeed.
	// Ignored on create.
	Cas *float64 `pulumi:"cas"`
	// Deprecated: No effect; will be removed in a future version.
	IncludeData *bool `pulumi:"includeData"`
	// Create a secret metadata
	Metadata *SecretMetadata `pulumi:"metadata"`
	// Okms ID
	OkmsId string `pulumi:"okmsId"`
	// Secret path
	Path string `pulumi:"path"`
	// Create an OKMS secret version
	Version SecretVersion `pulumi:"version"`
}

// The set of arguments for constructing a Secret resource.
type SecretArgs struct {
	// Check-and-set guard. Only used on update operations: must equal the current secret version for the update to succeed.
	// Ignored on create.
	Cas pulumi.Float64PtrInput
	// Deprecated: No effect; will be removed in a future version.
	IncludeData pulumi.BoolPtrInput
	// Create a secret metadata
	Metadata SecretMetadataPtrInput
	// Okms ID
	OkmsId pulumi.StringInput
	// Secret path
	Path pulumi.StringInput
	// Create an OKMS secret version
	Version SecretVersionInput
}

func (SecretArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*secretArgs)(nil)).Elem()
}

type SecretInput interface {
	pulumi.Input

	ToSecretOutput() SecretOutput
	ToSecretOutputWithContext(ctx context.Context) SecretOutput
}

func (*Secret) ElementType() reflect.Type {
	return reflect.TypeOf((**Secret)(nil)).Elem()
}

func (i *Secret) ToSecretOutput() SecretOutput {
	return i.ToSecretOutputWithContext(context.Background())
}

func (i *Secret) ToSecretOutputWithContext(ctx context.Context) SecretOutput {
	return pulumi.ToOutputWithContext(ctx, i).(SecretOutput)
}

// SecretArrayInput is an input type that accepts SecretArray and SecretArrayOutput values.
// You can construct a concrete instance of `SecretArrayInput` via:
//
//	SecretArray{ SecretArgs{...} }
type SecretArrayInput interface {
	pulumi.Input

	ToSecretArrayOutput() SecretArrayOutput
	ToSecretArrayOutputWithContext(context.Context) SecretArrayOutput
}

type SecretArray []SecretInput

func (SecretArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*Secret)(nil)).Elem()
}

func (i SecretArray) ToSecretArrayOutput() SecretArrayOutput {
	return i.ToSecretArrayOutputWithContext(context.Background())
}

func (i SecretArray) ToSecretArrayOutputWithContext(ctx context.Context) SecretArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(SecretArrayOutput)
}

// SecretMapInput is an input type that accepts SecretMap and SecretMapOutput values.
// You can construct a concrete instance of `SecretMapInput` via:
//
//	SecretMap{ "key": SecretArgs{...} }
type SecretMapInput interface {
	pulumi.Input

	ToSecretMapOutput() SecretMapOutput
	ToSecretMapOutputWithContext(context.Context) SecretMapOutput
}

type SecretMap map[string]SecretInput

func (SecretMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*Secret)(nil)).Elem()
}

func (i SecretMap) ToSecretMapOutput() SecretMapOutput {
	return i.ToSecretMapOutputWithContext(context.Background())
}

func (i SecretMap) ToSecretMapOutputWithContext(ctx context.Context) SecretMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(SecretMapOutput)
}

type SecretOutput struct{ *pulumi.OutputState }

func (SecretOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**Secret)(nil)).Elem()
}

func (o SecretOutput) ToSecretOutput() SecretOutput {
	return o
}

func (o SecretOutput) ToSecretOutputWithContext(ctx context.Context) SecretOutput {
	return o
}

// Check-and-set guard. Only used on update operations: must equal the current secret version for the update to succeed.
// Ignored on create.
func (o SecretOutput) Cas() pulumi.Float64PtrOutput {
	return o.ApplyT(func(v *Secret) pulumi.Float64PtrOutput { return v.Cas }).(pulumi.Float64PtrOutput)
}

// IAM resource metadata embedded in services models
func (o SecretOutput) Iam() SecretIamOutput {
	return o.ApplyT(func(v *Secret) SecretIamOutput { return v.Iam }).(SecretIamOutput)
}

// Deprecated: No effect; will be removed in a future version.
func (o SecretOutput) IncludeData() pulumi.BoolOutput {
	return o.ApplyT(func(v *Secret) pulumi.BoolOutput { return v.IncludeData }).(pulumi.BoolOutput)
}

// Create a secret metadata
func (o SecretOutput) Metadata() SecretMetadataOutput {
	return o.ApplyT(func(v *Secret) SecretMetadataOutput { return v.Metadata }).(SecretMetadataOutput)
}

// Okms ID
func (o SecretOutput) OkmsId() pulumi.StringOutput {
	return o.ApplyT(func(v *Secret) pulumi.StringOutput { return v.OkmsId }).(pulumi.StringOutput)
}

// Secret path
func (o SecretOutput) Path() pulumi.StringOutput {
	return o.ApplyT(func(v *Secret) pulumi.StringOutput { return v.Path }).(pulumi.StringOutput)
}

// Create an OKMS secret version
func (o SecretOutput) Version() SecretVersionOutput {
	return o.ApplyT(func(v *Secret) SecretVersionOutput { return v.Version }).(SecretVersionOutput)
}

type SecretArrayOutput struct{ *pulumi.OutputState }

func (SecretArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*Secret)(nil)).Elem()
}

func (o SecretArrayOutput) ToSecretArrayOutput() SecretArrayOutput {
	return o
}

func (o SecretArrayOutput) ToSecretArrayOutputWithContext(ctx context.Context) SecretArrayOutput {
	return o
}

func (o SecretArrayOutput) Index(i pulumi.IntInput) SecretOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *Secret {
		return vs[0].([]*Secret)[vs[1].(int)]
	}).(SecretOutput)
}

type SecretMapOutput struct{ *pulumi.OutputState }

func (SecretMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*Secret)(nil)).Elem()
}

func (o SecretMapOutput) ToSecretMapOutput() SecretMapOutput {
	return o
}

func (o SecretMapOutput) ToSecretMapOutputWithContext(ctx context.Context) SecretMapOutput {
	return o
}

func (o SecretMapOutput) MapIndex(k pulumi.StringInput) SecretOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *Secret {
		return vs[0].(map[string]*Secret)[vs[1].(string)]
	}).(SecretOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*SecretInput)(nil)).Elem(), &Secret{})
	pulumi.RegisterInputType(reflect.TypeOf((*SecretArrayInput)(nil)).Elem(), SecretArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*SecretMapInput)(nil)).Elem(), SecretMap{})
	pulumi.RegisterOutputType(SecretOutput{})
	pulumi.RegisterOutputType(SecretArrayOutput{})
	pulumi.RegisterOutputType(SecretMapOutput{})
}
