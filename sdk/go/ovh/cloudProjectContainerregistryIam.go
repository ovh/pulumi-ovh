// Code generated by pulumi-language-go DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package ovh

import (
	"context"
	"reflect"

	"errors"
	"github.com/ovh/pulumi-ovh/sdk/v2/go/ovh/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Creates an IAM configuration in an OVHcloud Managed Private Registry.
//
// ## Example Usage
//
// ```go
// package main
//
// import (
//
//	"github.com/ovh/pulumi-ovh/sdk/v2/go/ovh"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			myIam, err := ovh.NewCloudProjectContainerregistryIam(ctx, "my_iam", &ovh.CloudProjectContainerregistryIamArgs{
//				ServiceName: pulumi.String("XXXXXX"),
//				RegistryId:  pulumi.String("xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxx"),
//				DeleteUsers: pulumi.Bool(false),
//			})
//			if err != nil {
//				return err
//			}
//			ctx.Export("iam-enabled", myIam.IamEnabled)
//			return nil
//		})
//	}
//
// ```
//
// ## Import
//
// OVHcloud Managed Private Registry IAM can be imported using the tenant `service_name` and registry id `registry_id` separated by "/" E.g.,
//
// bash
//
// ```sh
// $ pulumi import ovh:index/cloudProjectContainerregistryIam:CloudProjectContainerregistryIam my-iam service_name/registry_id
// ```
type CloudProjectContainerregistryIam struct {
	pulumi.CustomResourceState

	// Delete existing users from Harbor. IAM can't be enabled if there is at least one user already created. This parameter is only used at IAM configuration creation. **Changing this value recreates the resource.**
	DeleteUsers pulumi.BoolPtrOutput `pulumi:"deleteUsers"`
	IamEnabled  pulumi.BoolOutput    `pulumi:"iamEnabled"`
	// The ID of the Managed Private Registry. **Changing this value recreates the resource.**
	RegistryId pulumi.StringOutput `pulumi:"registryId"`
	// The ID of the public cloud project. If omitted, the `OVH_CLOUD_PROJECT_SERVICE` environment variable is used. **Changing this value recreates the resource.**
	ServiceName pulumi.StringOutput `pulumi:"serviceName"`
}

// NewCloudProjectContainerregistryIam registers a new resource with the given unique name, arguments, and options.
func NewCloudProjectContainerregistryIam(ctx *pulumi.Context,
	name string, args *CloudProjectContainerregistryIamArgs, opts ...pulumi.ResourceOption) (*CloudProjectContainerregistryIam, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.RegistryId == nil {
		return nil, errors.New("invalid value for required argument 'RegistryId'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource CloudProjectContainerregistryIam
	err := ctx.RegisterResource("ovh:index/cloudProjectContainerregistryIam:CloudProjectContainerregistryIam", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetCloudProjectContainerregistryIam gets an existing CloudProjectContainerregistryIam resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetCloudProjectContainerregistryIam(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *CloudProjectContainerregistryIamState, opts ...pulumi.ResourceOption) (*CloudProjectContainerregistryIam, error) {
	var resource CloudProjectContainerregistryIam
	err := ctx.ReadResource("ovh:index/cloudProjectContainerregistryIam:CloudProjectContainerregistryIam", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering CloudProjectContainerregistryIam resources.
type cloudProjectContainerregistryIamState struct {
	// Delete existing users from Harbor. IAM can't be enabled if there is at least one user already created. This parameter is only used at IAM configuration creation. **Changing this value recreates the resource.**
	DeleteUsers *bool `pulumi:"deleteUsers"`
	IamEnabled  *bool `pulumi:"iamEnabled"`
	// The ID of the Managed Private Registry. **Changing this value recreates the resource.**
	RegistryId *string `pulumi:"registryId"`
	// The ID of the public cloud project. If omitted, the `OVH_CLOUD_PROJECT_SERVICE` environment variable is used. **Changing this value recreates the resource.**
	ServiceName *string `pulumi:"serviceName"`
}

type CloudProjectContainerregistryIamState struct {
	// Delete existing users from Harbor. IAM can't be enabled if there is at least one user already created. This parameter is only used at IAM configuration creation. **Changing this value recreates the resource.**
	DeleteUsers pulumi.BoolPtrInput
	IamEnabled  pulumi.BoolPtrInput
	// The ID of the Managed Private Registry. **Changing this value recreates the resource.**
	RegistryId pulumi.StringPtrInput
	// The ID of the public cloud project. If omitted, the `OVH_CLOUD_PROJECT_SERVICE` environment variable is used. **Changing this value recreates the resource.**
	ServiceName pulumi.StringPtrInput
}

func (CloudProjectContainerregistryIamState) ElementType() reflect.Type {
	return reflect.TypeOf((*cloudProjectContainerregistryIamState)(nil)).Elem()
}

type cloudProjectContainerregistryIamArgs struct {
	// Delete existing users from Harbor. IAM can't be enabled if there is at least one user already created. This parameter is only used at IAM configuration creation. **Changing this value recreates the resource.**
	DeleteUsers *bool `pulumi:"deleteUsers"`
	// The ID of the Managed Private Registry. **Changing this value recreates the resource.**
	RegistryId string `pulumi:"registryId"`
	// The ID of the public cloud project. If omitted, the `OVH_CLOUD_PROJECT_SERVICE` environment variable is used. **Changing this value recreates the resource.**
	ServiceName *string `pulumi:"serviceName"`
}

// The set of arguments for constructing a CloudProjectContainerregistryIam resource.
type CloudProjectContainerregistryIamArgs struct {
	// Delete existing users from Harbor. IAM can't be enabled if there is at least one user already created. This parameter is only used at IAM configuration creation. **Changing this value recreates the resource.**
	DeleteUsers pulumi.BoolPtrInput
	// The ID of the Managed Private Registry. **Changing this value recreates the resource.**
	RegistryId pulumi.StringInput
	// The ID of the public cloud project. If omitted, the `OVH_CLOUD_PROJECT_SERVICE` environment variable is used. **Changing this value recreates the resource.**
	ServiceName pulumi.StringPtrInput
}

func (CloudProjectContainerregistryIamArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*cloudProjectContainerregistryIamArgs)(nil)).Elem()
}

type CloudProjectContainerregistryIamInput interface {
	pulumi.Input

	ToCloudProjectContainerregistryIamOutput() CloudProjectContainerregistryIamOutput
	ToCloudProjectContainerregistryIamOutputWithContext(ctx context.Context) CloudProjectContainerregistryIamOutput
}

func (*CloudProjectContainerregistryIam) ElementType() reflect.Type {
	return reflect.TypeOf((**CloudProjectContainerregistryIam)(nil)).Elem()
}

func (i *CloudProjectContainerregistryIam) ToCloudProjectContainerregistryIamOutput() CloudProjectContainerregistryIamOutput {
	return i.ToCloudProjectContainerregistryIamOutputWithContext(context.Background())
}

func (i *CloudProjectContainerregistryIam) ToCloudProjectContainerregistryIamOutputWithContext(ctx context.Context) CloudProjectContainerregistryIamOutput {
	return pulumi.ToOutputWithContext(ctx, i).(CloudProjectContainerregistryIamOutput)
}

// CloudProjectContainerregistryIamArrayInput is an input type that accepts CloudProjectContainerregistryIamArray and CloudProjectContainerregistryIamArrayOutput values.
// You can construct a concrete instance of `CloudProjectContainerregistryIamArrayInput` via:
//
//	CloudProjectContainerregistryIamArray{ CloudProjectContainerregistryIamArgs{...} }
type CloudProjectContainerregistryIamArrayInput interface {
	pulumi.Input

	ToCloudProjectContainerregistryIamArrayOutput() CloudProjectContainerregistryIamArrayOutput
	ToCloudProjectContainerregistryIamArrayOutputWithContext(context.Context) CloudProjectContainerregistryIamArrayOutput
}

type CloudProjectContainerregistryIamArray []CloudProjectContainerregistryIamInput

func (CloudProjectContainerregistryIamArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*CloudProjectContainerregistryIam)(nil)).Elem()
}

func (i CloudProjectContainerregistryIamArray) ToCloudProjectContainerregistryIamArrayOutput() CloudProjectContainerregistryIamArrayOutput {
	return i.ToCloudProjectContainerregistryIamArrayOutputWithContext(context.Background())
}

func (i CloudProjectContainerregistryIamArray) ToCloudProjectContainerregistryIamArrayOutputWithContext(ctx context.Context) CloudProjectContainerregistryIamArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(CloudProjectContainerregistryIamArrayOutput)
}

// CloudProjectContainerregistryIamMapInput is an input type that accepts CloudProjectContainerregistryIamMap and CloudProjectContainerregistryIamMapOutput values.
// You can construct a concrete instance of `CloudProjectContainerregistryIamMapInput` via:
//
//	CloudProjectContainerregistryIamMap{ "key": CloudProjectContainerregistryIamArgs{...} }
type CloudProjectContainerregistryIamMapInput interface {
	pulumi.Input

	ToCloudProjectContainerregistryIamMapOutput() CloudProjectContainerregistryIamMapOutput
	ToCloudProjectContainerregistryIamMapOutputWithContext(context.Context) CloudProjectContainerregistryIamMapOutput
}

type CloudProjectContainerregistryIamMap map[string]CloudProjectContainerregistryIamInput

func (CloudProjectContainerregistryIamMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*CloudProjectContainerregistryIam)(nil)).Elem()
}

func (i CloudProjectContainerregistryIamMap) ToCloudProjectContainerregistryIamMapOutput() CloudProjectContainerregistryIamMapOutput {
	return i.ToCloudProjectContainerregistryIamMapOutputWithContext(context.Background())
}

func (i CloudProjectContainerregistryIamMap) ToCloudProjectContainerregistryIamMapOutputWithContext(ctx context.Context) CloudProjectContainerregistryIamMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(CloudProjectContainerregistryIamMapOutput)
}

type CloudProjectContainerregistryIamOutput struct{ *pulumi.OutputState }

func (CloudProjectContainerregistryIamOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**CloudProjectContainerregistryIam)(nil)).Elem()
}

func (o CloudProjectContainerregistryIamOutput) ToCloudProjectContainerregistryIamOutput() CloudProjectContainerregistryIamOutput {
	return o
}

func (o CloudProjectContainerregistryIamOutput) ToCloudProjectContainerregistryIamOutputWithContext(ctx context.Context) CloudProjectContainerregistryIamOutput {
	return o
}

// Delete existing users from Harbor. IAM can't be enabled if there is at least one user already created. This parameter is only used at IAM configuration creation. **Changing this value recreates the resource.**
func (o CloudProjectContainerregistryIamOutput) DeleteUsers() pulumi.BoolPtrOutput {
	return o.ApplyT(func(v *CloudProjectContainerregistryIam) pulumi.BoolPtrOutput { return v.DeleteUsers }).(pulumi.BoolPtrOutput)
}

func (o CloudProjectContainerregistryIamOutput) IamEnabled() pulumi.BoolOutput {
	return o.ApplyT(func(v *CloudProjectContainerregistryIam) pulumi.BoolOutput { return v.IamEnabled }).(pulumi.BoolOutput)
}

// The ID of the Managed Private Registry. **Changing this value recreates the resource.**
func (o CloudProjectContainerregistryIamOutput) RegistryId() pulumi.StringOutput {
	return o.ApplyT(func(v *CloudProjectContainerregistryIam) pulumi.StringOutput { return v.RegistryId }).(pulumi.StringOutput)
}

// The ID of the public cloud project. If omitted, the `OVH_CLOUD_PROJECT_SERVICE` environment variable is used. **Changing this value recreates the resource.**
func (o CloudProjectContainerregistryIamOutput) ServiceName() pulumi.StringOutput {
	return o.ApplyT(func(v *CloudProjectContainerregistryIam) pulumi.StringOutput { return v.ServiceName }).(pulumi.StringOutput)
}

type CloudProjectContainerregistryIamArrayOutput struct{ *pulumi.OutputState }

func (CloudProjectContainerregistryIamArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*CloudProjectContainerregistryIam)(nil)).Elem()
}

func (o CloudProjectContainerregistryIamArrayOutput) ToCloudProjectContainerregistryIamArrayOutput() CloudProjectContainerregistryIamArrayOutput {
	return o
}

func (o CloudProjectContainerregistryIamArrayOutput) ToCloudProjectContainerregistryIamArrayOutputWithContext(ctx context.Context) CloudProjectContainerregistryIamArrayOutput {
	return o
}

func (o CloudProjectContainerregistryIamArrayOutput) Index(i pulumi.IntInput) CloudProjectContainerregistryIamOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *CloudProjectContainerregistryIam {
		return vs[0].([]*CloudProjectContainerregistryIam)[vs[1].(int)]
	}).(CloudProjectContainerregistryIamOutput)
}

type CloudProjectContainerregistryIamMapOutput struct{ *pulumi.OutputState }

func (CloudProjectContainerregistryIamMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*CloudProjectContainerregistryIam)(nil)).Elem()
}

func (o CloudProjectContainerregistryIamMapOutput) ToCloudProjectContainerregistryIamMapOutput() CloudProjectContainerregistryIamMapOutput {
	return o
}

func (o CloudProjectContainerregistryIamMapOutput) ToCloudProjectContainerregistryIamMapOutputWithContext(ctx context.Context) CloudProjectContainerregistryIamMapOutput {
	return o
}

func (o CloudProjectContainerregistryIamMapOutput) MapIndex(k pulumi.StringInput) CloudProjectContainerregistryIamOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *CloudProjectContainerregistryIam {
		return vs[0].(map[string]*CloudProjectContainerregistryIam)[vs[1].(string)]
	}).(CloudProjectContainerregistryIamOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*CloudProjectContainerregistryIamInput)(nil)).Elem(), &CloudProjectContainerregistryIam{})
	pulumi.RegisterInputType(reflect.TypeOf((*CloudProjectContainerregistryIamArrayInput)(nil)).Elem(), CloudProjectContainerregistryIamArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*CloudProjectContainerregistryIamMapInput)(nil)).Elem(), CloudProjectContainerregistryIamMap{})
	pulumi.RegisterOutputType(CloudProjectContainerregistryIamOutput{})
	pulumi.RegisterOutputType(CloudProjectContainerregistryIamArrayOutput{})
	pulumi.RegisterOutputType(CloudProjectContainerregistryIamMapOutput{})
}
